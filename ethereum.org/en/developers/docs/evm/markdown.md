Skip to main content

[](/en/)

  * Learn
  * Use
  * Build
  * Participate
  * Research

Search```K`

Languages EN

Change page

[Overview](/en/developers/docs/)

Foundational topics

[Intro to Ethereum](/en/developers/docs/intro-to-ethereum/)

[Intro to Ether](/en/developers/docs/intro-to-ether/)

[Intro to dapps](/en/developers/docs/dapps/)

[Web2 vs Web3](/en/developers/docs/web2-vs-web3/)

[Accounts](/en/developers/docs/accounts/)

[Transactions](/en/developers/docs/transactions/)

[Blocks](/en/developers/docs/blocks/)

[Ethereum virtual machine (EVM)](/en/developers/docs/evm/)

[Opcodes](/en/developers/docs/evm/opcodes/)

[Gas](/en/developers/docs/gas/)

[Nodes and clients](/en/developers/docs/nodes-and-clients/)

[Run a node](/en/developers/docs/nodes-and-clients/run-a-node/)

[Client diversity](/en/developers/docs/nodes-and-clients/client-diversity/)

[Nodes as a service](/en/developers/docs/nodes-and-clients/nodes-as-a-
service/)

[Node architecture](/en/developers/docs/nodes-and-clients/node-architecture/)

[Light clients](/en/developers/docs/nodes-and-clients/light-clients/)

[Archive nodes](/en/developers/docs/nodes-and-clients/archive-nodes/)

[Bootnodes](/en/developers/docs/nodes-and-clients/bootnodes/)

[Networks](/en/developers/docs/networks/)

[Consensus mechanisms](/en/developers/docs/consensus-mechanisms/)

[Proof-of-work](/en/developers/docs/consensus-mechanisms/pow/)

[Mining](/en/developers/docs/consensus-mechanisms/pow/mining/)

[Mining algorithms](/en/developers/docs/consensus-
mechanisms/pow/mining/mining-algorithms/)

[Dagger-Hashimoto](/en/developers/docs/consensus-mechanisms/pow/mining/mining-
algorithms/dagger-hashimoto/)

[Ethash](/en/developers/docs/consensus-mechanisms/pow/mining/mining-
algorithms/ethash/)

[Proof-of-stake](/en/developers/docs/consensus-mechanisms/pos/)

[Gasper](/en/developers/docs/consensus-mechanisms/pos/gasper/)

[Weak subjectivity](/en/developers/docs/consensus-mechanisms/pos/weak-
subjectivity/)

[Attestations](/en/developers/docs/consensus-mechanisms/pos/attestations/)

[PoS rewards and penalties](/en/developers/docs/consensus-
mechanisms/pos/rewards-and-penalties/)

[PoS attack and defense](/en/developers/docs/consensus-mechanisms/pos/attack-
and-defense/)

[Keys](/en/developers/docs/consensus-mechanisms/pos/keys/)

[Proof-of-stake versus proof-of-work](/en/developers/docs/consensus-
mechanisms/pos/pos-vs-pow/)

[Block proposal](/en/developers/docs/consensus-mechanisms/pos/block-proposal/)

[Proof-of-stake FAQs](/en/developers/docs/consensus-mechanisms/pos/faqs/)

[Proof-of-authority](/en/developers/docs/consensus-mechanisms/poa/)

Ethereum stack

[Intro to the stack](/en/developers/docs/ethereum-stack/)

[Smart contracts](/en/developers/docs/smart-contracts/)

[Smart contract languages](/en/developers/docs/smart-contracts/languages/)

[Smart contract anatomy](/en/developers/docs/smart-contracts/anatomy/)

[Smart contracts libraries](/en/developers/docs/smart-contracts/libraries/)

[Testing smart contracts](/en/developers/docs/smart-contracts/testing/)

[Compiling smart contracts](/en/developers/docs/smart-contracts/compiling/)

[Deploying smart contracts](/en/developers/docs/smart-contracts/deploying/)

[Verifying smart contracts](/en/developers/docs/smart-contracts/verifying/)

[Upgrading smart contracts](/en/developers/docs/smart-contracts/upgrading/)

[Smart contract security](/en/developers/docs/smart-contracts/security/)

[Smart contract formal verification](/en/developers/docs/smart-
contracts/formal-verification/)

[Composability](/en/developers/docs/smart-contracts/composability/)

[Development networks](/en/developers/docs/development-networks/)

[Development frameworks](/en/developers/docs/frameworks/)

Ethereum client APIs

[JavaScript APIs](/en/developers/docs/apis/javascript/)

[Backend APIs](/en/developers/docs/apis/backend/)

[JSON-RPC](/en/developers/docs/apis/json-rpc/)

[Data and analytics](/en/developers/docs/data-and-analytics/)

[Block explorers](/en/developers/docs/data-and-analytics/block-explorers/)

[Storage](/en/developers/docs/storage/)

[Integrated Development Environments (IDEs)](/en/developers/docs/ides/)

[Programming languages](/en/developers/docs/programming-languages/)

[Dart](/en/developers/docs/programming-languages/dart/)

[Delphi](/en/developers/docs/programming-languages/delphi/)

[.NET](/en/developers/docs/programming-languages/dot-net/)

[Golang](/en/developers/docs/programming-languages/golang/)

[Java](/en/developers/docs/programming-languages/java/)

[JavaScript](/en/developers/docs/programming-languages/javascript/)

[Python](/en/developers/docs/programming-languages/python/)

[Ruby](/en/developers/docs/programming-languages/ruby/)

[Rust](/en/developers/docs/programming-languages/rust/)

Advanced

[Bridges](/en/developers/docs/bridges/)

[Standards](/en/developers/docs/standards/)

[Token standards](/en/developers/docs/standards/tokens/)

[ERC-20: Fungible Tokens](/en/developers/docs/standards/tokens/erc-20/)

[ERC-721: NFTs](/en/developers/docs/standards/tokens/erc-721/)

[ERC-777](/en/developers/docs/standards/tokens/erc-777/)

[ERC-1155](/en/developers/docs/standards/tokens/erc-1155/)

[ERC-4626](/en/developers/docs/standards/tokens/erc-4626/)

[Maximal extractable value (MEV)](/en/developers/docs/mev/)

[Oracles](/en/developers/docs/oracles/)

[Scaling](/en/developers/docs/scaling/)

[Optimistic rollups](/en/developers/docs/scaling/optimistic-rollups/)

[Zero-knowledge rollups](/en/developers/docs/scaling/zk-rollups/)

[State channels](/en/developers/docs/scaling/state-channels/)

[Sidechains](/en/developers/docs/scaling/sidechains/)

[Plasma](/en/developers/docs/scaling/plasma/)

[Validium](/en/developers/docs/scaling/validium/)

[Data availability](/en/developers/docs/data-availability/)

[Networking layer](/en/developers/docs/networking-layer/)

[Network addresses](/en/developers/docs/networking-layer/network-addresses/)

[Portal Network](/en/developers/docs/networking-layer/portal-network/)

[Data structures and encoding](/en/developers/docs/data-structures-and-
encoding/)

[Patricia Merkle Trie](/en/developers/docs/data-structures-and-
encoding/patricia-merkle-trie/)

[Recursive-length prefix (RLP)](/en/developers/docs/data-structures-and-
encoding/rlp/)

[Simple serialize (SSZ)](/en/developers/docs/data-structures-and-
encoding/ssz/)

[Web3 secret storage definition](/en/developers/docs/data-structures-and-
encoding/web3-secret-storage/)

Design fundamentals

[Intro to design and UX](/en/developers/docs/design-and-ux/)

# Ethereum Virtual Machine (EVM)

m

Last edit: [@minimalsm(opens in a new tab)](https://github.com/minimalsm), May
16, 2024

See contributors

On this page

  * Prerequisites
  * From ledger to state machine
  * The Ethereum state transition function
    * State
    * Transactions
  * EVM instructions
  * EVM implementations
  * Further Reading
  * Related Topics

The Ethereum Virtual Machine (EVM) is a decentralized virtual environment that
executes code consistently and securely across all Ethereum nodes. Nodes run
the EVM to execute smart contracts, using "[gas](/en/gas/)" to measure the
computational effort required for
[operations](/en/developers/docs/evm/opcodes/), ensuring efficient resource
allocation and network security.

## Prerequisites

Some basic familiarity with common terminology in computer science such as
[bytes(opens in a new tab)](https://wikipedia.org/wiki/Byte), [memory(opens in
a new tab)](https://wikipedia.org/wiki/Computer_memory), and a [stack(opens in
a new tab)](https://wikipedia.org/wiki/Stack_\(abstract_data_type\)) are
necessary to understand the EVM. It would also be helpful to be comfortable
with cryptography/blockchain concepts like [hash functions(opens in a new
tab)](https://wikipedia.org/wiki/Cryptographic_hash_function) and the [Merkle
tree(opens in a new tab)](https://wikipedia.org/wiki/Merkle_tree).

## From ledger to state machine

The analogy of a 'distributed ledger' is often used to describe blockchains
like Bitcoin, which enable a decentralized currency using fundamental tools of
cryptography. The ledger maintains a record of activity which must adhere to a
set of rules that govern what someone can and cannot do to modify the ledger.
For example, a Bitcoin address cannot spend more Bitcoin than it has
previously received. These rules underpin all transactions on Bitcoin and many
other blockchains.

While Ethereum has its own native cryptocurrency (Ether) that follows almost
exactly the same intuitive rules, it also enables a much more powerful
function: [smart contracts](/en/developers/docs/smart-contracts/). For this
more complex feature, a more sophisticated analogy is required. Instead of a
distributed ledger, Ethereum is a distributed [state machine(opens in a new
tab)](https://wikipedia.org/wiki/Finite-state_machine). Ethereum's state is a
large data structure which holds not only all accounts and balances, but a
_machine state_ , which can change from block to block according to a pre-
defined set of rules, and which can execute arbitrary machine code. The
specific rules of changing state from block to block are defined by the EVM.

[![A diagram showing the make up of the
EVM](/_next/image/?url=%2Fcontent%2Fdevelopers%2Fdocs%2Fevm%2Fevm.png&w=1920&q=75)](/content/developers/docs/evm/evm.png)
_Diagram adapted from[Ethereum EVM illustrated(opens in a new
tab)](https://takenobu-hs.github.io/downloads/ethereum_evm_illustrated.pdf)_

## The Ethereum state transition function

The EVM behaves as a mathematical function would: Given an input, it produces
a deterministic output. It therefore is quite helpful to more formally
describe Ethereum as having a **state transition function** :

    
    
    1Y(S, T)= S'

Given an old valid state `(S)` and a new set of valid transactions `(T)`, the
Ethereum state transition function `Y(S, T)` produces a new valid output state
`S'`

### State

In the context of Ethereum, the state is an enormous data structure called a
[modified Merkle Patricia Trie](/en/developers/docs/data-structures-and-
encoding/patricia-merkle-trie/), which keeps all
[accounts](/en/developers/docs/accounts/) linked by hashes and reducible to a
single root hash stored on the blockchain.

### Transactions

Transactions are cryptographically signed instructions from accounts. There
are two types of transactions: those which result in message calls and those
which result in contract creation.

Contract creation results in the creation of a new contract account containing
compiled [smart contract](/en/developers/docs/smart-contracts/anatomy/)
bytecode. Whenever another account makes a message call to that contract, it
executes its bytecode.

## EVM instructions

The EVM executes as a [stack machine(opens in a new
tab)](https://wikipedia.org/wiki/Stack_machine) with a depth of 1024 items.
Each item is a 256-bit word, which was chosen for the ease of use with 256-bit
cryptography (such as Keccak-256 hashes or secp256k1 signatures).

During execution, the EVM maintains a transient _memory_ (as a word-addressed
byte array), which does not persist between transactions.

Contracts, however, do contain a Merkle Patricia _storage_ trie (as a word-
addressable word array), associated with the account in question and part of
the global state.

Compiled smart contract bytecode executes as a number of EVM
[opcodes](/en/developers/docs/evm/opcodes/), which perform standard stack
operations like `XOR`, `AND`, `ADD`, `SUB`, etc. The EVM also implements a
number of blockchain-specific stack operations, such as `ADDRESS`, `BALANCE`,
`BLOCKHASH`, etc.

[![A diagram showing where gas is needed for EVM
operations](/_next/image/?url=%2Fcontent%2Fdevelopers%2Fdocs%2Fgas%2Fgas.png&w=1920&q=75)](/content/developers/docs/gas/gas.png)
_Diagrams adapted from[Ethereum EVM illustrated(opens in a new
tab)](https://takenobu-hs.github.io/downloads/ethereum_evm_illustrated.pdf)_

## EVM implementations

All implementations of the EVM must adhere to the specification described in
the Ethereum Yellowpaper.

Over Ethereum's nine year history, the EVM has undergone several revisions,
and there are several implementations of the EVM in various programming
languages.

[Ethereum execution clients](/en/developers/docs/nodes-and-clients/#execution-
clients) include an EVM implementation. Additionally, there are multiple
standalone implementations, including:

  * [Py-EVM(opens in a new tab)](https://github.com/ethereum/py-evm) \- _Python_
  * [evmone(opens in a new tab)](https://github.com/ethereum/evmone) \- _C++_
  * [ethereumjs-vm(opens in a new tab)](https://github.com/ethereumjs/ethereumjs-vm) \- _JavaScript_
  * [eEVM(opens in a new tab)](https://github.com/microsoft/eevm) \- _C++_
  * [revm(opens in a new tab)](https://github.com/bluealloy/revm) \- _Rust_

## Further Reading

  * [Ethereum Yellowpaper(opens in a new tab)](https://ethereum.github.io/yellowpaper/paper.pdf)
  * [Jellopaper aka KEVM: Semantics of EVM in K(opens in a new tab)](https://jellopaper.org/)
  * [The Beigepaper(opens in a new tab)](https://github.com/chronaeon/beigepaper)
  * [Ethereum Virtual Machine Opcodes(opens in a new tab)](https://www.ethervm.io/)
  * [Ethereum Virtual Machine Opcodes Interactive Reference(opens in a new tab)](https://www.evm.codes/)
  * [A short introduction in Solidity's documentation(opens in a new tab)](https://docs.soliditylang.org/en/latest/introduction-to-smart-contracts.html#index-6)
  * [Mastering Ethereum - The Ethereum Virtual Machine(opens in a new tab)](https://github.com/ethereumbook/ethereumbook/blob/develop/13evm.asciidoc)

## Related Topics

  * [Gas](/en/developers/docs/gas/)

back-to-top ↑

### Was this article helpful?

YesNo

![👈](https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f448.svg)

Previous

[Blocks](/en/developers/docs/blocks/)

![👉](https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f449.svg)

Next

[Opcodes](/en/developers/docs/evm/opcodes/)

  * [Edit page(opens in a new tab)](https://github.com/ethereum/ethereum-org-website/tree/dev/public/content/developers/docs/evm/index.md)
  * On this page

    * Prerequisites
    * From ledger to state machine
    * The Ethereum state transition function
      * State
      * Transactions
    * EVM instructions
    * EVM implementations
    * Further Reading
    * Related Topics

Website last updated: May 22, 2024

[(opens in a new tab)](https://github.com/ethereum/ethereum-org-
website)[(opens in a new tab)](https://twitter.com/ethdotorg)[(opens in a new
tab)](https://discord.gg/ethereum-org)

### Learn

  * [Learn Hub](/en/learn/)
  * [What is Ethereum?](/en/what-is-ethereum/)
  * [What is ether (ETH)?](/en/eth/)
  * [Ethereum wallets](/en/wallets/)
  * [What is Web3?](/en/web3/)
  * [Smart contracts](/en/smart-contracts/)
  * [Gas fees](/en/gas/)
  * [Run a node](/en/run-a-node/)
  * [Ethereum security and scam prevention](/en/security/)
  * [Quiz Hub](/en/quizzes/)
  * [Ethereum glossary](/en/glossary/)

### Use

  * [Guides](/en/guides/)
  * [Choose your wallet](/en/wallets/find-wallet/)
  * [Get ETH](/en/get-eth/)
  * [Dapps - Decentralized applications](/en/dapps/)
  * [Stablecoins](/en/stablecoins/)
  * [NFTs - Non-fungible tokens](/en/nft/)
  * [DeFi - Decentralized finance](/en/defi/)
  * [DAOs - Decentralized autonomous organizations](/en/dao/)
  * [Decentralized identity](/en/decentralized-identity/)
  * [Stake ETH](/en/staking/)
  * [Layer 2](/en/layer-2/)

### Build

  * [Builder's home](/en/developers/)
  * [Tutorials](/en/developers/tutorials/)
  * [Documentation](/en/developers/docs/)
  * [Learn by coding](/en/developers/learning-tools/)
  * [Set up local environment](/en/developers/local-environment/)
  * [Grants](/en/community/grants/)
  * [Foundational topics](/en/developers/docs/intro-to-ethereum/)
  * [UX/UI design fundamentals](/en/developers/docs/design-and-ux/)
  * [Enterprise - Mainnet Ethereum](/en/enterprise/)
  * [Enterprise - Private Ethereum](/en/enterprise/private-ethereum/)

### Participate

  * [Community hub](/en/community/)
  * [Online communities](/en/community/online/)
  * [Ethereum events](/en/community/events/)
  * [Contributing to ethereum.org](/en/contributing/)
  * [Translation Program](/en/contributing/translation-program/)
  * [Ethereum bug bounty program](/en/bug-bounty/)
  * [Ethereum Foundation](/en/foundation/)
  * [Ethereum Foundation Blog(opens in a new tab)](https://blog.ethereum.org/)
  * [Ecosystem Support Program(opens in a new tab)](https://esp.ethereum.foundation)
  * [Devcon(opens in a new tab)](https://devcon.org/)

### Research

  * [Ethereum Whitepaper](/en/whitepaper/)
  * [Ethereum roadmap](/en/roadmap/)
  * [Improved security](/en/roadmap/security/)
  * [Technical history of Ethereum](/en/history/)
  * [Open research](/en/community/research/)
  * [Ethereum Improvement Proposals](/en/eips/)
  * [Ethereum governance](/en/governance/)

  * [About us](/en/about/)
  * [Ethereum brand assets](/en/assets/)
  * [Code of conduct](/en/community/code-of-conduct/)
  * [Jobs](/en/about/#open-jobs)
  * [Privacy policy](/en/privacy-policy/)
  * [Terms of use](/en/terms-of-use/)
  * [Cookie policy](/en/cookie-policy/)
  * [Press Contact(opens in a new tab)](mailto:press@ethereum.org)

Is this page helpful?

