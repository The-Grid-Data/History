Skip to main content

[](/en/)

  * Learn
  * Use
  * Build
  * Participate
  * Research

Search```K`

Languages EN

Change page

[Overview](/en/developers/docs/)

Foundational topics

[Intro to Ethereum](/en/developers/docs/intro-to-ethereum/)

[Intro to Ether](/en/developers/docs/intro-to-ether/)

[Intro to dapps](/en/developers/docs/dapps/)

[Web2 vs Web3](/en/developers/docs/web2-vs-web3/)

[Accounts](/en/developers/docs/accounts/)

[Transactions](/en/developers/docs/transactions/)

[Blocks](/en/developers/docs/blocks/)

[Ethereum virtual machine (EVM)](/en/developers/docs/evm/)

[Opcodes](/en/developers/docs/evm/opcodes/)

[Gas](/en/developers/docs/gas/)

[Nodes and clients](/en/developers/docs/nodes-and-clients/)

[Run a node](/en/developers/docs/nodes-and-clients/run-a-node/)

[Client diversity](/en/developers/docs/nodes-and-clients/client-diversity/)

[Nodes as a service](/en/developers/docs/nodes-and-clients/nodes-as-a-
service/)

[Node architecture](/en/developers/docs/nodes-and-clients/node-architecture/)

[Light clients](/en/developers/docs/nodes-and-clients/light-clients/)

[Archive nodes](/en/developers/docs/nodes-and-clients/archive-nodes/)

[Bootnodes](/en/developers/docs/nodes-and-clients/bootnodes/)

[Networks](/en/developers/docs/networks/)

[Consensus mechanisms](/en/developers/docs/consensus-mechanisms/)

[Proof-of-work](/en/developers/docs/consensus-mechanisms/pow/)

[Mining](/en/developers/docs/consensus-mechanisms/pow/mining/)

[Mining algorithms](/en/developers/docs/consensus-
mechanisms/pow/mining/mining-algorithms/)

[Dagger-Hashimoto](/en/developers/docs/consensus-mechanisms/pow/mining/mining-
algorithms/dagger-hashimoto/)

[Ethash](/en/developers/docs/consensus-mechanisms/pow/mining/mining-
algorithms/ethash/)

[Proof-of-stake](/en/developers/docs/consensus-mechanisms/pos/)

[Gasper](/en/developers/docs/consensus-mechanisms/pos/gasper/)

[Weak subjectivity](/en/developers/docs/consensus-mechanisms/pos/weak-
subjectivity/)

[Attestations](/en/developers/docs/consensus-mechanisms/pos/attestations/)

[PoS rewards and penalties](/en/developers/docs/consensus-
mechanisms/pos/rewards-and-penalties/)

[PoS attack and defense](/en/developers/docs/consensus-mechanisms/pos/attack-
and-defense/)

[Keys](/en/developers/docs/consensus-mechanisms/pos/keys/)

[Proof-of-stake versus proof-of-work](/en/developers/docs/consensus-
mechanisms/pos/pos-vs-pow/)

[Block proposal](/en/developers/docs/consensus-mechanisms/pos/block-proposal/)

[Proof-of-stake FAQs](/en/developers/docs/consensus-mechanisms/pos/faqs/)

[Proof-of-authority](/en/developers/docs/consensus-mechanisms/poa/)

Ethereum stack

[Intro to the stack](/en/developers/docs/ethereum-stack/)

[Smart contracts](/en/developers/docs/smart-contracts/)

[Smart contract languages](/en/developers/docs/smart-contracts/languages/)

[Smart contract anatomy](/en/developers/docs/smart-contracts/anatomy/)

[Smart contracts libraries](/en/developers/docs/smart-contracts/libraries/)

[Testing smart contracts](/en/developers/docs/smart-contracts/testing/)

[Compiling smart contracts](/en/developers/docs/smart-contracts/compiling/)

[Deploying smart contracts](/en/developers/docs/smart-contracts/deploying/)

[Verifying smart contracts](/en/developers/docs/smart-contracts/verifying/)

[Upgrading smart contracts](/en/developers/docs/smart-contracts/upgrading/)

[Smart contract security](/en/developers/docs/smart-contracts/security/)

[Smart contract formal verification](/en/developers/docs/smart-
contracts/formal-verification/)

[Composability](/en/developers/docs/smart-contracts/composability/)

[Development networks](/en/developers/docs/development-networks/)

[Development frameworks](/en/developers/docs/frameworks/)

Ethereum client APIs

[JavaScript APIs](/en/developers/docs/apis/javascript/)

[Backend APIs](/en/developers/docs/apis/backend/)

[JSON-RPC](/en/developers/docs/apis/json-rpc/)

[Data and analytics](/en/developers/docs/data-and-analytics/)

[Block explorers](/en/developers/docs/data-and-analytics/block-explorers/)

[Storage](/en/developers/docs/storage/)

[Integrated Development Environments (IDEs)](/en/developers/docs/ides/)

[Programming languages](/en/developers/docs/programming-languages/)

[Dart](/en/developers/docs/programming-languages/dart/)

[Delphi](/en/developers/docs/programming-languages/delphi/)

[.NET](/en/developers/docs/programming-languages/dot-net/)

[Golang](/en/developers/docs/programming-languages/golang/)

[Java](/en/developers/docs/programming-languages/java/)

[JavaScript](/en/developers/docs/programming-languages/javascript/)

[Python](/en/developers/docs/programming-languages/python/)

[Ruby](/en/developers/docs/programming-languages/ruby/)

[Rust](/en/developers/docs/programming-languages/rust/)

Advanced

[Bridges](/en/developers/docs/bridges/)

[Standards](/en/developers/docs/standards/)

[Token standards](/en/developers/docs/standards/tokens/)

[ERC-20: Fungible Tokens](/en/developers/docs/standards/tokens/erc-20/)

[ERC-721: NFTs](/en/developers/docs/standards/tokens/erc-721/)

[ERC-777](/en/developers/docs/standards/tokens/erc-777/)

[ERC-1155](/en/developers/docs/standards/tokens/erc-1155/)

[ERC-4626](/en/developers/docs/standards/tokens/erc-4626/)

[Maximal extractable value (MEV)](/en/developers/docs/mev/)

[Oracles](/en/developers/docs/oracles/)

[Scaling](/en/developers/docs/scaling/)

[Optimistic rollups](/en/developers/docs/scaling/optimistic-rollups/)

[Zero-knowledge rollups](/en/developers/docs/scaling/zk-rollups/)

[State channels](/en/developers/docs/scaling/state-channels/)

[Sidechains](/en/developers/docs/scaling/sidechains/)

[Plasma](/en/developers/docs/scaling/plasma/)

[Validium](/en/developers/docs/scaling/validium/)

[Data availability](/en/developers/docs/data-availability/)

[Networking layer](/en/developers/docs/networking-layer/)

[Network addresses](/en/developers/docs/networking-layer/network-addresses/)

[Portal Network](/en/developers/docs/networking-layer/portal-network/)

[Data structures and encoding](/en/developers/docs/data-structures-and-
encoding/)

[Patricia Merkle Trie](/en/developers/docs/data-structures-and-
encoding/patricia-merkle-trie/)

[Recursive-length prefix (RLP)](/en/developers/docs/data-structures-and-
encoding/rlp/)

[Simple serialize (SSZ)](/en/developers/docs/data-structures-and-
encoding/ssz/)

[Web3 secret storage definition](/en/developers/docs/data-structures-and-
encoding/web3-secret-storage/)

Design fundamentals

[Intro to design and UX](/en/developers/docs/design-and-ux/)

# Gasper

n

Last edit: [@nhsz(opens in a new tab)](https://github.com/nhsz), August 15,
2023

See contributors

On this page

  * Prerequisites
  * The role of Gasper
  * What is finality?
    * Incentives and Slashing
    * Inactivity Leak
    * Fork choice
  * Further Reading

Gasper is a combination of Casper the Friendly Finality Gadget (Casper-FFG)
and the LMD-GHOST fork choice algorithm. Together these components form the
consensus mechanism securing proof-of-stake Ethereum. Casper is the mechanism
that upgrades certain blocks to "finalized" so that new entrants into the
network can be confident that they are syncing the canonical chain. The fork
choice algorithm uses accumulated votes to ensure that nodes can easily select
the correct one when forks arise in the blockchain.

**Note** that the original definition of Casper-FFG was updated slightly for
inclusion in Gasper. On this page we consider the updated version.

## Prerequisites

To understand this material it is necessary to read the introductory page on
[proof-of-stake](/en/developers/docs/consensus-mechanisms/pos/).

## The role of Gasper

Gasper sits on top of a proof-of-stake blockchain where nodes provide ether as
a security deposit that can be destroyed if they are lazy or dishonest in
proposing or validating blocks. Gasper is the mechanism defining how
validators get rewarded and punished, decide which blocks to accept and
reject, and which fork of the blockchain to build on.

## What is finality?

Finality is a property of certain blocks that means they cannot be reverted
unless there has been a critical consensus failure and an attacker has
destroyed at least 1/3 of the total staked ether. Finalized blocks can be
thought of as information the blockchain is certain about. A block must pass
through a two-step upgrade procedure for a block to be finalized:

  1. Two-thirds of the total staked ether must have voted in favor of that block's inclusion in the canonical chain. This condition upgrades the block to "justified". Justified blocks are unlikely to be reverted, but they can be under certain conditions.
  2. When another block is justified on top of a justified block, it is upgraded to "finalized". Finalizing a block is a commitment to include the block in the canonical chain. It cannot be reverted unless an attacker destroys millions of ether (billions of $USD).

These block upgrades do not happen in every slot. Instead, only epoch-boundary
blocks can be justified and finalized. These blocks are known as
"checkpoints". Upgrading considers pairs of checkpoints. A "supermajority
link" must exist between two successive checkpoints (i.e. two-thirds of the
total staked ether voting that checkpoint B is the correct descendant of
checkpoint A) to upgrade the less recent checkpoint to finalized and the more
recent block to justified.

Because finality requires a two-thirds agreement that a block is canonical, an
attacker cannot possibly create an alternative finalized chain without:

  1. Owning or manipulating two-thirds of the total staked ether.
  2. Destroying at least one-third of the total staked ether.

The first condition arises because two-thirds of the staked ether is required
to finalize a chain. The second condition arises because if two-thirds of the
total stake has voted in favor of both forks, then one-third must have voted
on both. Double-voting is a slashing condition that would be maximally
punished, and one-third of the total stake would be destroyed. As of May 2022,
this requires an attacker to burn around $10 billion worth of ether. The
algorithm that justifies and finalizes blocks in Gasper is a slightly modified
form of [Casper the Friendly Finality Gadget (Casper-FFG)(opens in a new
tab)](https://arxiv.org/pdf/1710.09437.pdf).

### Incentives and Slashing

Validators get rewarded for honestly proposing and validating blocks. Ether is
rewarded and added to their stake. On the other hand, validators that are
absent and fail to act when called upon miss out on these rewards and
sometimes lose a small portion of their existing stake. However, the penalties
for being offline are small and, in most cases, amount to opportunity costs of
missing rewards. However, some validator actions are very difficult to do
accidentally and signify some malicious intent, such as proposing multiple
blocks for the same slot, attesting to multiple blocks for the same slot, or
contradicting previous checkpoint votes. These are "slashable" behaviors that
are penalized more harshly—slashing results in some portion of the validator's
stake being destroyed and the validator being removed from the network of
validators. This process takes 36 days. On Day 1, there is an initial penalty
of up to 1 ETH. Then the slashed validator's ether slowly drains away across
the exit period, but on Day 18, they receive a "correlation penalty", which is
larger when more validators are slashed around the same time. The maximum
penalty is the entire stake. These rewards and penalties are designed to
incentivize honest validators and disincentivize attacks on the network.

### Inactivity Leak

As well as security, Gasper also provides "plausible liveness". This is the
condition that as long as two-thirds of the total staked ether is voting
honestly and following the protocol, the chain will be able to finalize
irrespective of any other activity (such as attacks, latency issues, or
slashings). Put another way, one-third of the total staked ether must be
somehow compromised to prevent the chain from finalizing. In Gasper, there is
an additional line of defense against a liveness failure, known as the
"inactivity leak". This mechanism activates when the chain has failed to
finalize for more than four epochs. The validators that are not actively
attesting to the majority chain have their stake gradually drained away until
the majority regains two-thirds of the total stake, ensuring that liveness
failures are only temporary.

### Fork choice

The original definition of Casper-FFG included a fork choice algorithm that
imposed the rule: `follow the chain containing the justified checkpoint that
has the greatest height` where height is defined as the greatest distance from
the genesis block. In Gasper, the original fork choice rule is deprecated in
favor of a more sophisticated algorithm called LMD-GHOST. It is important to
realize that under normal conditions, a fork choice rule is unnecessary -
there is a single block proposer for every slot, and honest validators attest
to it. It is only in cases of large network asynchronicity or when a dishonest
block proposer has equivocated that a fork choice algorithm is required.
However, when those cases do arise, the fork choice algorithm is a critical
defense that secures the correct chain.

LMD-GHOST stands for "latest message-driven greedy heaviest observed sub-
tree". This is a jargon-heavy way to define an algorithm that selects the fork
with the greatest accumulated weight of attestations as the canonical one
(greedy heaviest subtree) and that if multiple messages are received from a
validator, only the latest one is considered (latest-message driven). Before
adding the heaviest block to its canonical chain, every validator assesses
each block using this rule.

## Further Reading

  * [Gasper: Combining GHOST and Casper(opens in a new tab)](https://arxiv.org/pdf/2003.03052.pdf)
  * [Casper the Friendly Finality Gadget(opens in a new tab)](https://arxiv.org/pdf/1710.09437.pdf)

back-to-top ↑

### Was this article helpful?

YesNo

![👈](https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f448.svg)

Previous

[Proof-of-stake](/en/developers/docs/consensus-mechanisms/pos/)

![👉](https://cdnjs.cloudflare.com/ajax/libs/twemoji/12.0.4/2/svg/1f449.svg)

Next

[Weak subjectivity](/en/developers/docs/consensus-mechanisms/pos/weak-
subjectivity/)

  * [Edit page(opens in a new tab)](https://github.com/ethereum/ethereum-org-website/tree/dev/public/content/developers/docs/consensus-mechanisms/pos/gasper/index.md)
  * On this page

    * Prerequisites
    * The role of Gasper
    * What is finality?
      * Incentives and Slashing
      * Inactivity Leak
      * Fork choice
    * Further Reading

Website last updated: May 22, 2024

[(opens in a new tab)](https://github.com/ethereum/ethereum-org-
website)[(opens in a new tab)](https://twitter.com/ethdotorg)[(opens in a new
tab)](https://discord.gg/ethereum-org)

### Learn

  * [Learn Hub](/en/learn/)
  * [What is Ethereum?](/en/what-is-ethereum/)
  * [What is ether (ETH)?](/en/eth/)
  * [Ethereum wallets](/en/wallets/)
  * [What is Web3?](/en/web3/)
  * [Smart contracts](/en/smart-contracts/)
  * [Gas fees](/en/gas/)
  * [Run a node](/en/run-a-node/)
  * [Ethereum security and scam prevention](/en/security/)
  * [Quiz Hub](/en/quizzes/)
  * [Ethereum glossary](/en/glossary/)

### Use

  * [Guides](/en/guides/)
  * [Choose your wallet](/en/wallets/find-wallet/)
  * [Get ETH](/en/get-eth/)
  * [Dapps - Decentralized applications](/en/dapps/)
  * [Stablecoins](/en/stablecoins/)
  * [NFTs - Non-fungible tokens](/en/nft/)
  * [DeFi - Decentralized finance](/en/defi/)
  * [DAOs - Decentralized autonomous organizations](/en/dao/)
  * [Decentralized identity](/en/decentralized-identity/)
  * [Stake ETH](/en/staking/)
  * [Layer 2](/en/layer-2/)

### Build

  * [Builder's home](/en/developers/)
  * [Tutorials](/en/developers/tutorials/)
  * [Documentation](/en/developers/docs/)
  * [Learn by coding](/en/developers/learning-tools/)
  * [Set up local environment](/en/developers/local-environment/)
  * [Grants](/en/community/grants/)
  * [Foundational topics](/en/developers/docs/intro-to-ethereum/)
  * [UX/UI design fundamentals](/en/developers/docs/design-and-ux/)
  * [Enterprise - Mainnet Ethereum](/en/enterprise/)
  * [Enterprise - Private Ethereum](/en/enterprise/private-ethereum/)

### Participate

  * [Community hub](/en/community/)
  * [Online communities](/en/community/online/)
  * [Ethereum events](/en/community/events/)
  * [Contributing to ethereum.org](/en/contributing/)
  * [Translation Program](/en/contributing/translation-program/)
  * [Ethereum bug bounty program](/en/bug-bounty/)
  * [Ethereum Foundation](/en/foundation/)
  * [Ethereum Foundation Blog(opens in a new tab)](https://blog.ethereum.org/)
  * [Ecosystem Support Program(opens in a new tab)](https://esp.ethereum.foundation)
  * [Devcon(opens in a new tab)](https://devcon.org/)

### Research

  * [Ethereum Whitepaper](/en/whitepaper/)
  * [Ethereum roadmap](/en/roadmap/)
  * [Improved security](/en/roadmap/security/)
  * [Technical history of Ethereum](/en/history/)
  * [Open research](/en/community/research/)
  * [Ethereum Improvement Proposals](/en/eips/)
  * [Ethereum governance](/en/governance/)

  * [About us](/en/about/)
  * [Ethereum brand assets](/en/assets/)
  * [Code of conduct](/en/community/code-of-conduct/)
  * [Jobs](/en/about/#open-jobs)
  * [Privacy policy](/en/privacy-policy/)
  * [Terms of use](/en/terms-of-use/)
  * [Cookie policy](/en/cookie-policy/)
  * [Press Contact(opens in a new tab)](mailto:press@ethereum.org)

Is this page helpful?

